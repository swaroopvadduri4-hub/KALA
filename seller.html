<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seller Dashboard</title>
  <link rel="stylesheet" href="stylein.css">
  
</head>


  <header>
    <h2>Seller Dashboard</h2>
   
  <main>
    <form id="addProductForm">

  <h3>create  Profile</h3>
  <input type="text" id="inputSellerName" placeholder="Your Name">
  <textarea id="inputSellerBio" placeholder="Brief info about you"></textarea>
  <input type="file" id="inputSellerAvatar">
  <button id="saveProfileBtn">Save Profile</button>
  
  </section>
   <h3>Add New Product</h3>
      <input type="text" id="productName" placeholder="Product Name" required>
      <input type="number" id="productPrice" placeholder="Price" required>
      <textarea id="productDesc" placeholder="Description"></textarea>
      <button type="submit">Add Product</button>
      <section id="sellerProfile">
        
      </section>
<h2> A dedicated webpage is allotated to the sellers where a profile and brief introduction of seller.</h2>
<h2> Additionally a feature of providing AI generating video representation of item that sekkers wants to sell llikey a animated videos and these videos we link to home page as a suggestions </h2>
<h2> Seller can check his complete digital bussiness catalog here. </h2>
<h2> An other page is linked admin dashboard by using port number</h2>
<script>
async function fetchProducts() {
  const res = await fetch("/products");
  const products = await res.json();
  const container = document.getElementById("productsContainer");
  container.innerHTML = ""; // clear old content

  products.forEach(prod => {
    const card = document.createElement("div");
    card.innerHTML = `
      <img src="${prod.image}" alt="${prod.name}" width="100">
      <h4>${prod.name}</h4>
      <p>${prod.description}</p>
      <p>Price: $${prod.price}</p>
      <p>Buyers: ${prod.buyers}</p>
    `;
    container.appendChild(card);
  });
}

fetchProducts();
const form = document.getElementById("addProductForm");
form.addEventListener("submit", async (e) => {
  e.preventDefault();
  const formData = new FormData(form);

  const res = await fetch("/products", {
    method: "POST",
    body: formData
  });
  const data = await res.json();
  if (data.success) {
    alert("Product added!");
    fetchProducts(); // refresh the list
    form.reset();
  }
});
<script>
document.getElementById("saveProfileBtn").addEventListener("click", async () => {
  const name = document.getElementById("inputSellerName").value;
  const bio = document.getElementById("inputSellerBio").value;
  const avatarFile = document.getElementById("inputSellerAvatar").files[0];

  const formData = new FormData();
  formData.append("name", name);
  formData.append("bio", bio);
  if (avatarFile) formData.append("avatar", avatarFile);

  const res = await fetch("/avatars", { // use avatars route to save profile
    method: "POST",
    body: formData
  });
  const data = await res.json();
  if (data.success) {
    alert("Profile updated!");
    document.getElementById("sellerName").innerText = name;
    document.getElementById("sellerBio").innerText = bio;
    if (data.avatarUrl) {
      document.getElementById("sellerAvatar").src = data.avatarUrl;
    }
  }
});
</script>

    </form>
  </main>
  <script src="script.js"></script>
  <script>
  document.getElementById("sellerForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const name = document.getElementById("name").value;
    const email = document.getElementById("email").value;
    const shop = document.getElementById("shop").value;

    const response = await fetch("/api/sellers", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ name, email, shop })
    });

    if (response.ok) {
      // âœ… Redirect to dashboard
      window.location.href = "/dashboard.html";
    } else {
      alert("Error saving seller details");
    }
  });
</script>


</body>
</html>
